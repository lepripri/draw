<!DOCTYPE html>
<html lang="fr"><head>
<meta charset="UTF-8">
<title>nouveau Dessin SVG â€“ le pripri draw</title>

<style>
/* ===== STYLE PRIPRI ===== */
html, body {
  margin: 0;
  padding: 0;
  background-color: #fcb1e3;
  font-family: Arial, sans-serif;
  height: 100%;
}

body {
  display: flex;
}

/* ===== BARRE OUTILS ===== */
#tools {
  width: 180px;
  background: #fcb1e3;
  border-right: 3px solid #ff0000;
  padding: 6px;
}

#tools button {
  width: 100%;
  background: white;
  border: 2px solid #ff0000;
  margin-bottom: 4px;
  padding: 4px;
  cursor: pointer;
  height: 40px;
}

#tools button::before {
    background-repeat: no-repeat;
    background-size: 32px;
    display: inline-block;
    min-width: 32px;
    min-height: 32px;
}

#tools button:hover {
  background: #ffdddd;
}

/* ===== CANVAS ===== */
#canvas {
  flex: 1;
  background: white;
  border: 3px solid #ff0000;
  cursor: crosshair;
}

/* ===== SVG ELEMENTS ===== */
.selected {
  stroke: #ff0000 !important;
  stroke-width: 2;
}

.handle {
  fill: white;
  stroke: #ff0000;
  stroke-width: 1.5;
}

.rotate {
  fill: #ff0000;
  cursor: grab;
}
.select::before {
    content: "";
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjIwcHgiIGhlaWdodD0iMjBweCIgdmlld0JveD0iMCAwIDIwIDIwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0My4yICgzOTA2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+c2VsZWN0PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9InNlbGVjdCIgZmlsbD0iIzU3NUU3NSI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik05LjA4NDgwNzA5LDEyLjc1MTkxMzEgTDEwLjI2OTI5MzcsMTUuMzkxMDc1MyBDMTAuNTAyNTI4MSwxNS45MTI4NDggMTEuMTEwNTA5OCwxNi4xNDMyNzU1IDExLjYyNjc3MDEsMTUuOTA3NTUwOCBDMTIuMTQzMDMwNCwxNS42NzA1MDE4IDEyLjM3MTAyMzYsMTUuMDU2MDI4NCAxMi4xMzc3ODkyLDE0LjUzNTU4IEwxMC45NjY5NjI3LDExLjkyNTcyOCBMMTMuOTI1ODUzLDExLjkyNTcyOCBDMTQuNTEzMDQ4NiwxMS45MjU3MjggMTQuNzkzNzY5MywxMS4yMTIxOTQ4IDE0LjM2MjM4NjUsMTAuODE5MDQ5NSBMNy4wNzkxMDA3LDQuMTcwMDQyOTQgQzYuNjY3MDMzNiwzLjc5MzQ5MTQgNiw0LjA4MzI0NDYyIDYsNC42Mzg0OTg1NyBMNiwxNC41MDI4NzIyIEM2LDE1LjA5MDAzNzMgNi43MzAxMzEzOCwxNS4zNjU3NDk2IDcuMTIyODgyODIsMTQuOTI3OTI4NyBMOS4wODQ4MDcwOSwxMi43NTE5MTMxIFoiIGlkPSJzZWxlY3QtaWNvbiI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+);
}
.rect::before {
    content: "";
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjIwcHgiIGhlaWdodD0iMjBweCIgdmlld0JveD0iMCAwIDIwIDIwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0My4yICgzOTA2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+cmVjdGFuZ2xlPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj4KICAgICAgICA8ZyBpZD0icmVjdGFuZ2xlIiBzdHJva2U9IiM1NzVFNzUiIHN0cm9rZS13aWR0aD0iMS41Ij4KICAgICAgICAgICAgPHJlY3QgaWQ9InJlY3RhbmdsZS1pY29uIiB4PSI1IiB5PSI1IiB3aWR0aD0iMTAiIGhlaWdodD0iMTAiPjwvcmVjdD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==);
}
.ellipse::before {
    content: "";
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjIwcHgiIGhlaWdodD0iMjBweCIgdmlld0JveD0iMCAwIDIwIDIwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0My4yICgzOTA2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+b3ZhbDwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJvdmFsIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlPSIjNTc1RTc1Ij4KICAgICAgICAgICAgPGNpcmNsZSBpZD0ib3ZhbC1pY29uIiBjeD0iMTAiIGN5PSIxMCIgcj0iNSI+PC9jaXJjbGU+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=);
}
.line::before {
    content: "";
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjIwcHgiIGhlaWdodD0iMjBweCIgdmlld0JveD0iMCAwIDIwIDIwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0My4yICgzOTA2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+bGluZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiPgogICAgICAgIDxnIGlkPSJsaW5lIiBzdHJva2U9IiM1NzVFNzUiIHN0cm9rZS13aWR0aD0iMiI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik01LDE1IEwxNSw1IiBpZD0iTGluZSI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+);
}
.text::before {
    content: "";
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjIwcHgiIGhlaWdodD0iMjBweCIgdmlld0JveD0iMCAwIDIwIDIwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0My4yICgzOTA2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dGV4dDwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJ0ZXh0IiBmaWxsPSIjNTc1RTc1Ij4KICAgICAgICAgICAgPHBhdGggZD0iTTE2LDQuMzUyOTQxMTggTDE2LDYuODUxNzY0NzEgQzE2LDcuMDQ5NDExNzYgMTUuODQ0NzA1OSw3LjIwNDcwNTg4IDE1LjY0NzA1ODgsNy4yMDQ3MDU4OCBMMTQuODk4ODIzNSw3LjIwNDcwNTg4IEMxNC43NTc2NDcxLDcuMjA0NzA1ODggMTQuNjE2NDcwNiw3LjEyIDE0LjU3NDExNzYsNi45OTI5NDExOCBMMTQuMjA3MDU4OCw2LjExNzY0NzA2IEwxMS4wNTg4MjM1LDYuMTE3NjQ3MDYgTDExLjA1ODgyMzUsMTQuMjkxNzY0NyBMMTEuOTIsMTQuNjE2NDcwNiBDMTIuMDYxMTc2NSwxNC42NzI5NDEyIDEyLjE2LDE0LjggMTIuMTYsMTQuOTU1Mjk0MSBMMTIuMTYsMTUuNjQ3MDU4OCBDMTIuMTYsMTUuODQ0NzA1OSAxMS45OTA1ODgyLDE2IDExLjgwNzA1ODgsMTYgTDguMjA3MDU4ODIsMTYgQzguMDIzNTI5NDEsMTYgNy44NTQxMTc2NSwxNS44NDQ3MDU5IDcuODU0MTE3NjUsMTUuNjQ3MDU4OCBMNy44NTQxMTc2NSwxNC45NTUyOTQxIEM3Ljg1NDExNzY1LDE0LjggNy45NTI5NDExOCwxNC42NzI5NDEyIDguMDgsMTQuNjE2NDcwNiBMOC45NDExNzY0NywxNC4yOTE3NjQ3IEw4Ljk0MTE3NjQ3LDYuMTE3NjQ3MDYgTDUuODA3MDU4ODIsNi4xMTc2NDcwNiBMNS40NCw2Ljk5Mjk0MTE4IEM1LjM4MzUyOTQxLDcuMTIgNS4yNTY0NzA1OSw3LjIwNDcwNTg4IDUuMTE1Mjk0MTIsNy4yMDQ3MDU4OCBMNC4zNTI5NDExOCw3LjIwNDcwNTg4IEM0LjE2OTQxMTc2LDcuMjA0NzA1ODggNCw3LjA0OTQxMTc2IDQsNi44NTE3NjQ3MSBMNCw0LjM1Mjk0MTE4IEM0LDQuMTU1Mjk0MTIgNC4xNjk0MTE3Niw0IDQuMzUyOTQxMTgsNCBMMTUuNjQ3MDU4OCw0IEMxNS44NDQ3MDU5LDQgMTYsNC4xNTUyOTQxMiAxNiw0LjM1Mjk0MTE4IiBpZD0idGV4dC1pY29uIj48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=);
}
.redraw::before {
    content: "";
    background-image: url(data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='20px' height='20px' viewBox='0 0 20 20' version='1.1'><title>reshape</title><desc>Created with Sketch.</desc><g stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'><g id='reshape'><g id='reshape-icon' transform='translate(3 2)'><path d='M6.3718 4e-05 C6.3718 1.20298846 6.03840639 2.32811001 5.45898306 3.28804076 C5.31876362 3.52034235 4.30079812 3.15107034 3.82818604 3.61859131 C3.35557395 4.08611228 3.47873759 5.34529147 3.26181884 5.47482181 C2.30759304 6.04462589 1.19191205 6.37204 -0.0002 6.37204' stroke='%23575E75' stroke-width='0.75'/><path d='M4 6.94999094 C2.85887984 6.71835578 2 5.70947896 2 4.5 C2 3.11928813 3.11928813 2 4.5 2 C5.88071187 2 7 3.11928813 7 4.5 C7 4.56854233 6.99724162 4.63644042 6.99182982 4.70358929 L6.68137747 4.42017327 C5.65792772 3.48493325 4 4.20484091 4 5.595932 L4 6.94999094 Z' fill='%23575E75'/><path d='M4 7.96455557 C2.30385293 7.72194074 1 6.26323595 1 4.5 C1 2.56700338 2.56700338 1 4.5 1 C6.43299662 1 8 2.56700338 8 4.5 C8 4.84508345 7.95005914 5.1785026 7.85701065 5.4934242 L6.68137747 4.42017327 C5.65792772 3.48493325 4 4.20484091 4 5.595932 L4 7.96455557 Z' fill='%23575E75' fill-opacity='0.15'/><path d='M7.87915329 13.1684522 L8.98467414 15.6316703 C9.20235954 16.1186581 9.76980913 16.3337238 10.2516521 16.1137141 C10.7334951 15.8924683 10.9462887 15.3189598 10.7286032 14.833208 L9.63583183 12.3973461 L12.3974628 12.3973461 C12.945512 12.3973461 13.207518 11.7313818 12.8048941 11.3644462 L6.00716065 5.15870674 C5.6225647 4.80725864 5 5.07769498 5 5.595932 L5 14.8026807 C5 15.3507015 5.68145595 15.608033 6.04802397 15.1994001 L7.87915329 13.1684522 Z' fill='%23575E75'/></g></g></g></svg>);
}
.paint::before {
    content: "";
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjIwcHgiIGhlaWdodD0iMjBweCIgdmlld0JveD0iMCAwIDIwIDIwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0My4yICgzOTA2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+YnJ1c2g8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPgogICAgICAgIDxnIGlkPSJicnVzaCIgc3Ryb2tlPSIjNTc1RTc1IiBzdHJva2Utd2lkdGg9IjAuNSIgZmlsbD0iIzU3NUU3NSI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi41Nzg3MjI1LDExLjIxMDIwMjYgQzExLjYxOTYyODQsMTIuMTY5Mjk2NyAxMC45MTI5Mjc0LDEyLjY2MTQ2MzQgMTAuMzU3NjYyNCwxMi44NTA3NTgzIEMxMC4xOTM2MDY5LDEyLjM0NTk3MTkgOS45MTU5NzQzNywxMS44NzkwNDQ1IDkuNTI0NzY0OTQsMTEuNDg3ODM1MSBDOS4xMjA5MzU4NSwxMS4wOTY2MjU3IDguNjU0MDA4NDYsMTAuODE4OTkzMiA4LjE0OTIyMjA5LDEwLjY0MjMxNzkgQzguMzUxMTM2NjQsMTAuMDg3MDUyOSA4Ljg0MzMwMzM1LDkuMzgwMzUyMDMgOS43ODk3Nzc3OCw4LjQzMzg3NzU5IEMxMi4wNjEzMTY0LDYuMTQ5NzE5MjkgMTYuMDk5NjA3NCwzLjM2MDc3NDYxIDE2Ljg2OTQwNjYsNC4xMzA1NzM4MiBDMTcuNjM5MjA1OCw0LjkwMDM3MzAzIDE0Ljg1MDI2MTEsOC45Mzg2NjM5NiAxMi41Nzg3MjI1LDExLjIxMDIwMjYgWiBNOC4zOTEyNDMzNCwxNS40MTIwMTA0IEM4LjAxNTY5MTk3LDE1Ljc3NDg2NTcgNy41MzExMDk1NSwxNS45NjIxNDU5IDcuMDQ2NTI3MTMsMTUuOTg1NTU1OSBMNy4wNDY1MjcxMywxNS45OTcyNjA5IEw2LjkyNTM4MTUzLDE1Ljk5NzI2MDkgQzMuNjc4Njc5MzQsMTYuMTE0MzExIDIuMjYxMjc1NzcsMTIuNDM4OTM3OSAzLjM3NTgxNTMzLDEyLjgyNTIwMzIgQzQuODQxNjc3MTQsMTMuMzI4NTE4NiA1LjQzNjUwMjA1LDEyLjYwMjgwOCA1LjQ1OTUxOTcyLDEyLjU3OTM5OCBDNi4yNzExOTUyNywxMS44MDY4NjczIDcuNTc5NTY3NzksMTEuODA2ODY3MyA4LjM5MTI0MzM0LDEyLjU3OTM5OCBDOS4yMDI5MTg4OSwxMy4zNjM2MzM3IDkuMjAyOTE4ODksMTQuNjM5NDc5OCA4LjM5MTI0MzM0LDE1LjQxMjAxMDQgWiIgaWQ9ImJ1cnNoLWljb24iPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==);
}
.eraser::before {
    content: "";
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjIwcHgiIGhlaWdodD0iMjBweCIgdmlld0JveD0iMCAwIDIwIDIwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0My4yICgzOTA2OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+ZXJhc2VyPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9ImVyYXNlciIgZmlsbD0iIzU3NUU3NSI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy41MzcwMDYxLDE0LjgyOTE1OTcgTDEwLjk2NjA1NDUsMTQuODI5MTU5NyBMOC4zMDE2MTM4LDEyLjE2NDcxOSBMMTEuMTY4NjE0NCw5LjI5NzcxODQyIEwxNS4xMjYzMjE2LDEzLjI1NTQyNTcgTDEzLjUzNzAwNjEsMTQuODI5MTU5NyBaIE0xNi43Nzc5NjMzLDEyLjY5NDQ5MDggTDExLjE2ODYxNDQsNy4xMDA3MjM0MyBMOC4zMDE2MTM4LDQuMjMzNzIyODcgQzguMDA1NTY0ODMsMy45MjIwOTIzOCA3LjUwNjk1NjA0LDMuOTIyMDkyMzggNy4xOTUzMjU1NCw0LjIzMzcyMjg3IEwzLjIyMjAzNjczLDguMjA3MDExNjkgQzIuOTI1OTg3NzYsOC41MDMwNjA2NiAyLjkyNTk4Nzc2LDkuMDAxNjY5NDUgMy4yMjIwMzY3Myw5LjI5NzcxODQyIEw2LjEwNDYxODgxLDEyLjE2NDcxOSBMMTAuMDkzNDg5MSwxNi4xNTM1ODkzIEMxMC4yMzM3MjI5LDE2LjMwOTQwNDYgMTAuNDM2MjgyNywxNi4zODczMTIyIDEwLjYzODg0MjUsMTYuMzg3MzEyMiBMMTMuODY0MjE4MSwxNi4zODczMTIyIEMxNC4wNjY3NzgsMTYuMzg3MzEyMiAxNC4yNjkzMzc4LDE2LjMwOTQwNDYgMTQuNDA5NTcxNSwxNi4xNTM1ODkzIEwxNi43Nzc5NjMzLDEzLjgwMDc3OTEgQzE3LjA3NDAxMjIsMTMuNTA0NzMwMSAxNy4wNzQwMTIyLDEzLjAwNjEyMTMgMTYuNzc3OTYzMywxMi42OTQ0OTA4IEwxNi43Nzc5NjMzLDEyLjY5NDQ5MDggWiIgaWQ9ImVyYXNlci1pY29uIj48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=);
}
.fill::before {
    content: "";
    background-image: url(data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='20px' height='20px' viewBox='0 0 20 20' version='1.1'><title>fill</title><desc>Created with Sketch.</desc><g stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'><g id='fill' fill='%23575E75'><path d='M14.0450969 9.69349504 L14.0306818 9.67916207 C13.4396629 9.36383682 12.5170968 8.69018743 11.4215496 7.60088203 C11.0900024 7.27122381 10.7872854 6.95589857 10.5422288 6.65490628 C10.71521 6.4399118 10.8881911 6.22491731 11.0611722 6.00992282 C11.3783043 6.26791621 11.7242666 6.58324146 12.084644 6.9415656 C12.3152855 7.17089305 12.5026817 7.37155458 12.690078 7.5722161 C12.7189081 7.61521499 12.7621534 7.65821389 12.8198138 7.70121279 C13.6270591 8.6185226 14.1027573 9.36383682 14.3189837 9.7938258 C14.3189837 9.80815877 14.3333988 9.82249173 14.3333988 9.8368247 C14.2469082 9.7938258 14.1460025 9.7508269 14.0450969 9.69349504 M10.5998892 10.0661521 C9.7349835 10.53914 8.91332309 10.983462 7.61596455 10.6824697 C6.17445506 10.3528115 5.4825305 9.76515987 5.19422861 9.42116869 L8.3078891 5.40793826 C8.52411553 5.83792723 8.84124762 6.28224917 9.1727948 6.69790518 C8.82683252 7.21389195 8.55294572 7.64388093 8.42320986 7.84454245 C8.27905891 8.08820287 8.35113439 8.41786108 8.6106061 8.5755237 C8.69709667 8.63285557 8.79800233 8.6615215 8.8844929 8.6615215 C9.07188913 8.6615215 9.24487027 8.56119074 9.34577594 8.40352811 C9.50434198 8.13120176 9.69173821 7.84454245 9.89354954 7.55788313 C10.1962665 7.90187431 10.4701533 8.17420066 10.6575496 8.36052922 C11.0755873 8.77618523 11.4936251 9.14884234 11.8972477 9.47850055 C11.4215496 9.60749724 11.0035119 9.85115766 10.5998892 10.0661521 M10.2106816 5.33627343 C10.0953609 5.49393605 9.96562502 5.65159868 9.85030426 5.79492834 C9.50434198 5.33627343 9.28811556 4.96361632 9.1727948 4.70562293 C9.41785141 4.80595369 9.76381369 5.02094818 10.2106816 5.33627343 M13.5117384 4.07497244 C13.6703044 4.07497244 13.8432855 4.10363837 13.8721157 4.1753032 C14.0450969 4.49062845 13.6270591 5.49393605 13.0648704 6.3969129 L12.848644 6.18191841 C12.6180025 5.95259096 12.2287949 5.59426681 11.781927 5.20727674 C12.4450213 4.53362734 13.0504553 4.07497244 13.5117384 4.07497244 M16.5533234 12.1587652 C16.337097 11.5997795 15.9911347 11.0981257 15.587512 10.6681367 C15.5442667 10.6108049 15.4866064 10.567806 15.428946 10.5248071 C15.6740026 9.99448732 15.2703799 9.23484013 14.9244177 8.69018743 C14.6505309 8.24586549 14.2757384 7.74421169 13.8288705 7.24255788 C14.3910592 6.38257993 15.3568705 4.676957 14.8379271 3.67364939 C14.679361 3.37265711 14.3189837 3 13.5117384 3 L13.4973233 3 C12.6756629 3 11.7675119 3.65931643 10.9458515 4.51929438 C10.0232854 3.84564498 9.01422875 3.31532525 8.40879477 3.65931643 C8.35113439 3.68798236 8.27905891 3.71664829 8.23581363 3.77398015 C8.22139853 3.78831312 8.19256835 3.80264609 8.17815325 3.83131202 C8.16373816 3.84564498 8.14932306 3.85997795 8.13490797 3.88864388 L8.12049287 3.91730981 L4.12751158 9.04851158 L4.09868139 9.06284454 L3.20494551 10.2238148 L3.16170023 10.2668137 C3.11845494 10.3098126 3.08962475 10.3671444 3.07520966 10.4101433 L3.07520966 10.4244763 C2.62834171 11.3417861 4.28607763 13.1334068 5.06449275 13.92172 C5.75641731 14.6097023 7.28441737 16 8.23581363 16 C8.43762496 16 8.596191 15.9426681 8.74034195 15.8136714 L14.2613233 11.5567806 C14.2901535 11.5424476 14.3045686 11.5137817 14.3333988 11.4851158 C14.362229 11.5137817 14.3766441 11.5567806 14.3910592 11.5854465 C14.5640403 11.9294377 14.679361 12.2877619 14.6937761 12.6747519 C14.7370214 13.061742 14.7081912 13.463065 14.6505309 13.8500551 L14.6505309 13.8643881 C14.6361158 13.9790518 14.6361158 14.0793826 14.6505309 14.1940463 C14.7514365 14.8390298 15.3568705 15.2833517 15.9911347 15.1830209 C16.639814 15.0826902 17.0866819 14.4807056 16.9857762 13.8357222 C16.8992857 13.2767365 16.7839649 12.7034179 16.5533234 12.1587652'/></g></g></svg>);
}
</style><style>html, body {background-color: #fcb1e3; margin: 0px;min-height: 700px;width: 100%;height: 100%;width: -webkit-fill-available;height: -webkit-fill-available;} ::backdrop {background: none} dialog {background: #fcb1e3;border-color: #ff0000;border-style: solid;} dialog.message {display: flex;align-items: center;justify-content: center;flex-direction: column; padding-block-start: 0px;} dialog > img[src="https://lepripri.github.io/lepripri/icons/Warning.png"] {width: 1em; height: 1em; display: block}</style>
</head>

<body>

<div id="tools">
  <button onclick="setTool('select')" class="select"></button>
  <button onclick="setTool('rect')" class="rect"></button>
  <button onclick="setTool('ellipse')" class="ellipse"></button>
  <button onclick="setTool('line')" class="line"></button>
  <button onclick="setTool('text')" class="text"></button>
  <button onclick="setTool('paint')" class="paint"></button>
  <button onclick="setTool('eraser')" class="eraser"></button>
  <button onclick="setTool('fill')" class="fill"></button>
  <button onclick="setTool('redraw')" class="redraw"></button>
  <hr>
  <button onclick="exportSVG()">ðŸ’¾ Export SVG</button>
</div>

<svg id="canvas"></svg>

<script>
const svg = document.getElementById("canvas");
const ns = "http://www.w3.org/2000/svg";

let tool = "select";
let current = null;
let selected = null;
let startX = 0, startY = 0;
let handles = [];
let path = null;
let lastX = 0, lastY = 0;

/* ===== TOOLS ===== */
function setTool(t) {
  tool = t;
  removeHandles();
}

/* ===== DRAW ===== */
svg.addEventListener("mousedown", e => {
  startX = e.offsetX;
  startY = e.offsetY;

  if (tool === "select") {
    select(e.target);
    return;
  }

  current = create(tool, startX, startY);
  if (current) svg.appendChild(current);
if (tool === "paint") {
  path = document.createElementNS(ns, "path");
  path.setAttribute("fill", "none");
  path.setAttribute("stroke", "black");
  path.setAttribute("stroke-width", 3);
  path.setAttribute("d", `M ${startX} ${startY}`);
  svg.appendChild(path);
  lastX = startX;
  lastY = startY;
}

if (tool === "eraser") {
  eraseAt(e.offsetX, e.offsetY);
}
if (tool === "fill" && e.target !== svg) {
  const color = prompt("Couleur Pripri ?", "#ff0000");
  if (color) e.target.setAttribute("fill", color);
}

});

svg.addEventListener("mousemove", e => {
  if (!current) return;

  const x = e.offsetX;
  const y = e.offsetY;

  if (current.tagName === "rect") {
    current.setAttribute("x", Math.min(x, startX));
    current.setAttribute("y", Math.min(y, startY));
    current.setAttribute("width", Math.abs(x - startX));
    current.setAttribute("height", Math.abs(y - startY));
  }

  if (current.tagName === "ellipse") {
    current.setAttribute("cx", (x + startX) / 2);
    current.setAttribute("cy", (y + startY) / 2);
    current.setAttribute("rx", Math.abs(x - startX) / 2);
    current.setAttribute("ry", Math.abs(y - startY) / 2);
  }

  if (current.tagName === "line") {
    current.setAttribute("x2", x);
    current.setAttribute("y2", y);
  }
});

svg.addEventListener("mouseup", () => {  current = null;  path = null;});

/* ===== CREATE ===== */
function create(t, x, y) {
  let e;

  if (t === "rect") {
    e = document.createElementNS(ns, "rect");
    e.setAttribute("fill", "none");
    e.setAttribute("stroke", "black");
  }

  if (t === "ellipse") {
    e = document.createElementNS(ns, "ellipse");
    e.setAttribute("fill", "none");
    e.setAttribute("stroke", "black");
  }

  if (t === "line") {
    e = document.createElementNS(ns, "line");
    e.setAttribute("x1", x);
    e.setAttribute("y1", y);
    e.setAttribute("x2", x);
    e.setAttribute("y2", y);
    e.setAttribute("stroke", "black");
  }

  if (t === "text") {
    const txt = prompt("Texte Pripri ?");
    if (!txt) return null;
    e = document.createElementNS(ns, "text");
    e.setAttribute("x", x);
    e.setAttribute("y", y);
    e.textContent = txt;
  }

  return e;
}

/* ===== SELECTION ===== */
function select(el) {
  if (el === svg) return;
  if (selected) selected.classList.remove("selected");
  selected = el;
  selected.classList.add("selected");
  createHandles();
}

/* ===== HANDLES ===== */
function createHandles() {
  removeHandles();
  if (!selected.getBBox) return;

  const b = selected.getBBox();
  const pts = [
    [b.x, b.y],
    [b.x + b.width, b.y],
    [b.x, b.y + b.height],
    [b.x + b.width, b.y + b.height]
  ];

  pts.forEach(p => {
    const h = document.createElementNS(ns, "rect");
    h.setAttribute("x", p[0] - 4);
    h.setAttribute("y", p[1] - 4);
    h.setAttribute("width", 8);
    h.setAttribute("height", 8);
    h.classList.add("handle");
    h.onmousedown = ev => resize(ev, p);
    svg.appendChild(h);
    handles.push(h);
  });

  const r = document.createElementNS(ns, "circle");
  r.setAttribute("cx", b.x + b.width / 2);
  r.setAttribute("cy", b.y - 20);
  r.setAttribute("r", 6);
  r.classList.add("rotate");
  r.onmousedown = startRotate;
  svg.appendChild(r);
  handles.push(r);
}

function removeHandles() {
  handles.forEach(h => h.remove());
  handles = [];
}

/* ===== RESIZE ===== */
function resize(e, origin) {
  e.stopPropagation();

  const isEllipse = selected.tagName === "ellipse";

  svg.onmousemove = ev => {
    const x = ev.offsetX;
    const y = ev.offsetY;

    const w = Math.abs(x - origin[0]);
    const h = Math.abs(y - origin[1]);

    if (isEllipse) {
      selected.setAttribute("rx", w / 2);
      selected.setAttribute("ry", h / 2);
      selected.setAttribute("cx", origin[0] + w / 2);
      selected.setAttribute("cy", origin[1] + h / 2);
    } else {
      selected.setAttribute("x", Math.min(x, origin[0]));
      selected.setAttribute("y", Math.min(y, origin[1]));
      selected.setAttribute("width", w);
      selected.setAttribute("height", h);
    }
  };

  svg.onmouseup = () => {
    svg.onmousemove = null;
    createHandles();
  };
}

/* ===== ROTATE ===== */
function startRotate(e) {
  e.stopPropagation();
  const b = selected.getBBox();
  const cx = b.x + b.width / 2;
  const cy = b.y + b.height / 2;

  svg.onmousemove = ev => {
    const a = Math.atan2(ev.offsetY - cy, ev.offsetX - cx) * 180 / Math.PI;
    selected.setAttribute("transform", `rotate(${a} ${cx} ${cy})`);
  };

  svg.onmouseup = () => svg.onmousemove = null;
}

/* ===== EXPORT ===== */
function exportSVG() {
  removeHandles();
  const blob = new Blob([svg.outerHTML], { type: "image/svg+xml" });
  download(blob, "pripri.svg");
  createHandles();
}

function download(blob, name) {
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = name;
  a.click();
}
function selectToolInInterface(toolClass) {
    document.querySelector('.' + toolClass).style.backgroundColor = '#ff000099'
}
setInterval(() => {
    selectToolInInterface(tool)
}, 100)
function eraseAt(x, y) {
  const el = document.elementFromPoint(
    x + svg.getBoundingClientRect().left,
    y + svg.getBoundingClientRect().top
  );

  if (el && el !== svg && el.tagName !== "rect" && el.classList.contains("handle") === false) {
    el.remove();
  }
}
if (tool === "redraw" && e.target !== svg) {
  var closer = () => {dialog.close();dialog.remove();}, dialog = document.createElement("dialog");dialog.innerHTML = '<img src="https://lepripri.github.io/lepripri/icons/Warning.png">beta : contenu en<br>cours de crÃ©ation';dialog.className = "message";document.body.appendChild(dialog);dialog.showModal();dialog.addEventListener("click", closer);dialog.addEventListener("keydown", closer);document.addEventListener("keydown", closer);setTimeout(closer, 3000)
}
</script>



</body></html>
